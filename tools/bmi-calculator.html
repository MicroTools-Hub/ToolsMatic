<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BMI Calculator | ToolsMatic</title>
  <meta name="description" content="Advanced BMI calculator with metric/imperial presets, healthy weight range, body fat approximation, and TDEE estimateâ€”runs fully in your browser.">
  <link rel="manifest" href="/manifest.webmanifest">
  <link rel="stylesheet" href="../assets/styles.css">
  <script src="/assets/site.js" defer></script>
  <script>
    window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
  </script>
  <script defer src="/_vercel/insights/script.js"></script>
</head>
<body>
  <header>
    <div class="nav">
      <a class="brand" href="/">ToolsMatic</a>
      <div class="nav-links">
        <a href="/" class="nav-btn">All tools</a>
        <button id="theme-toggle" class="theme-toggle" title="Toggle dark/light mode">ðŸŒ™</button>
      </div>
    </div>
  </header>

  <main>
    <section class="tool-shell">
      <h1>BMI Calculator</h1>
      <div class="two-col" style="gap:12px;">
        <label class="label">Units
          <select id="units" style="margin-top:4px;">
            <option value="metric" selected>Metric (kg, cm)</option>
            <option value="imperial">Imperial (lb, in)</option>
          </select>
        </label>
        <label class="label">Sex (for body fat est.)
          <select id="sex" style="margin-top:4px;">
            <option value="male">Male</option>
            <option value="female">Female</option>
          </select>
        </label>
      </div>
      <div class="two-col" style="gap:12px;">
        <label class="label">Height
          <input id="height" type="number" placeholder="170" value="170">
        </label>
        <label class="label">Weight
          <input id="weight" type="number" placeholder="70" value="70">
        </label>
      </div>
      <div class="two-col" style="gap:12px;">
        <label class="label">Age (years)
          <input id="age" type="number" placeholder="30" value="30">
        </label>
        <label class="label">Waist (cm or in, optional)
          <input id="waist" type="number" placeholder="80">
        </label>
      </div>
      <div class="inline-controls" style="margin-top:12px;flex-wrap:wrap;">
        <button id="calc" data-primary>Calculate</button>
        <button id="reset" data-clear>Reset</button>
      </div>
      <div class="result-box" id="bmi-line">BMI: --</div>
      <div class="meter" aria-hidden="true"><div class="meter-fill" id="bmi-meter"></div></div>
      <div class="muted-bg" style="margin-top:12px;">
        <div class="pill" style="margin-bottom:6px;">Details</div>
        <div id="details" class="muted-text">Fill in your numbers and calculate.</div>
      </div>
      <div class="muted-bg" style="margin-top:12px;">
        <div class="pill" style="margin-bottom:6px;">Healthy range</div>
        <div id="range" class="muted-text">--</div>
      </div>
    </section>

    <section class="section" aria-labelledby="bmi-what">
      <h2 id="bmi-what">Why this tool?</h2>
      <p>Check BMI with unit presets, see the healthy weight range for your height, approximate body fat using the Deurenberg formula, and estimate maintenance calories (TDEE) with Mifflin-St Jeor. Everything runs locally.</p>
      <p>Useful for quick fitness check-ins, onboarding flows, or coaching notes without sharing data.</p>
      <h2>How to use it</h2>
      <p>Select metric or imperial units, enter height and weight, and click Calculate. The page converts as needed, reports BMI with category, and fills the meter so you see your position visually. Provide age for body fat estimation and waist (optional) for added context in coaching notes. Switch units at any time to view the same numbers in kg/cm or lb/in without retyping.</p>
      <p>The healthy range panel shows the target weight span for a BMI of 18.5â€“24.9 in both kg and lb, giving you clear goals. The details panel summarizes estimated body fat and maintenance calories using light-activity TDEE so you can plan next steps or discuss with a professional.</p>
      <h2>Who benefits</h2>
      <p>Fitness coaches preparing quick assessments, product teams building onboarding flows for health apps, clinicians offering general guidance (not medical advice), and individuals checking progress all gain a fast reference. Researchers and students can demonstrate BMI limitations while still presenting consistent calculations.</p>
      <p>Support teams for wellness products can troubleshoot user reports by replicating entries exactly, thanks to explicit unit toggles and deterministic formulas. Because everything is client-side, it is safe to use in privacy-sensitive environments.</p>
      <h2>Implementation details</h2>
      <p>BMI is computed from metric values; imperial inputs are converted on the fly. Body fat uses the Deurenberg approximation (1.2Ã—BMI + 0.23Ã—age âˆ’ 10.8Ã—sex âˆ’ 5.4), and TDEE uses the Mifflin-St Jeor equation with a light-activity multiplier. These are estimates, not medical diagnostics.</p>
      <p>No data is sent or stored. All calculations run instantly in the browser with no third-party libraries, keeping performance high on mobile and low-power devices. Reset returns defaults for quick repeated checks during coaching sessions or user support.</p>
    </section>
  </main>

  <footer>ToolsMatic Â· Fast, privacy-first utilities for the web.</footer>

  <script>
    const unitsEl = document.getElementById('units');
    const sexEl = document.getElementById('sex');
    const heightEl = document.getElementById('height');
    const weightEl = document.getElementById('weight');
    const ageEl = document.getElementById('age');
    const waistEl = document.getElementById('waist');
    const calcBtn = document.getElementById('calc');
    const resetBtn = document.getElementById('reset');
    const bmiLine = document.getElementById('bmi-line');
    const meter = document.getElementById('bmi-meter');
    const details = document.getElementById('details');
    const rangeBox = document.getElementById('range');

    const clamp = (v, min, max) => Math.min(max, Math.max(min, v));

    const toMetric = () => {
      if (unitsEl.value === 'metric') return;
      const h = parseFloat(heightEl.value);
      const w = parseFloat(weightEl.value);
      if (!Number.isNaN(h)) heightEl.value = Math.round(h * 2.54);
      if (!Number.isNaN(w)) weightEl.value = Math.round(w / 2.20462);
      unitsEl.value = 'metric';
    };

    const toImperial = () => {
      if (unitsEl.value === 'imperial') return;
      const h = parseFloat(heightEl.value);
      const w = parseFloat(weightEl.value);
      if (!Number.isNaN(h)) heightEl.value = Math.round(h / 2.54);
      if (!Number.isNaN(w)) weightEl.value = Math.round(w * 2.20462);
      unitsEl.value = 'imperial';
    };

    const bmiCategory = (bmi) => {
      if (bmi < 18.5) return 'Underweight';
      if (bmi < 25) return 'Normal';
      if (bmi < 30) return 'Overweight';
      return 'Obese';
    };

    const meterFill = (bmi) => {
      const width = clamp((bmi / 40) * 100, 0, 100);
      meter.style.width = `${width}%`;
    };

    const calcRange = (hMeters) => {
      const min = 18.5 * (hMeters ** 2);
      const max = 24.9 * (hMeters ** 2);
      return { min, max };
    };

    const estimateBodyFat = (bmi, age, sex) => {
      // Deurenberg formula approximation
      const s = sex === 'male' ? 1 : 0;
      const bf = 1.2 * bmi + 0.23 * age - 10.8 * s - 5.4;
      return Math.max(2, Math.round(bf * 10) / 10);
    };

    const estimateTDEE = (weightKg, heightCm, age, sex) => {
      const s = sex === 'male' ? 5 : -161;
      const bmr = 10 * weightKg + 6.25 * heightCm - 5 * age + s;
      // light activity multiplier by default
      return Math.round(bmr * 1.375);
    };

    const calc = () => {
      const units = unitsEl.value;
      let h = parseFloat(heightEl.value);
      let w = parseFloat(weightEl.value);
      const age = parseInt(ageEl.value, 10) || 30;
      const waist = parseFloat(waistEl.value);
      if (Number.isNaN(h) || Number.isNaN(w) || h <= 0 || w <= 0) {
        bmiLine.textContent = 'Enter valid height and weight.';
        meterFill(0);
        details.textContent = 'Height and weight are required. Add waist for body fat refinement.';
        rangeBox.textContent = '--';
        return;
      }

      if (units === 'imperial') {
        const hMeters = (h * 2.54) / 100;
        const wKg = w / 2.20462;
        calcWithMetric(hMeters, wKg, age, waist, sexEl.value);
      } else {
        const hMeters = h / 100;
        const wKg = w;
        calcWithMetric(hMeters, wKg, age, waist, sexEl.value);
      }
    };

    const calcWithMetric = (hMeters, wKg, age, waist, sex) => {
      const bmi = wKg / (hMeters * hMeters);
      const rounded = Math.round(bmi * 10) / 10;
      const cat = bmiCategory(rounded);
      bmiLine.textContent = `BMI: ${rounded} Â· ${cat}`;
      meterFill(rounded);

      const range = calcRange(hMeters);
      const rangeMin = Math.round(range.min * 10) / 10;
      const rangeMax = Math.round(range.max * 10) / 10;
      rangeBox.textContent = `Healthy weight range: ${rangeMin.toFixed(1)} kg - ${rangeMax.toFixed(1)} kg (${(rangeMin*2.20462).toFixed(1)} lb - ${(rangeMax*2.20462).toFixed(1)} lb)`;

      const bf = estimateBodyFat(rounded, age, sex);
      const tdee = estimateTDEE(wKg, hMeters * 100, age, sex);
      const waistNote = waist && !Number.isNaN(waist) ? `Waist: ${waist} ${(unitsEl.value === 'imperial') ? 'in' : 'cm'}` : 'Waist not provided';
      details.textContent = `Body fat est: ${bf}% Â· Est. maintenance (TDEE, light activity): ${tdee} kcal/day Â· ${waistNote}`;
    };

    const reset = () => {
      unitsEl.value = 'metric';
      sexEl.value = 'male';
      heightEl.value = 170;
      weightEl.value = 70;
      ageEl.value = 30;
      waistEl.value = '';
      bmiLine.textContent = 'BMI: --';
      meterFill(0);
      details.textContent = 'Fill in your numbers and calculate.';
      rangeBox.textContent = '--';
    };

    unitsEl.addEventListener('change', () => {
      if (unitsEl.value === 'metric') toMetric(); else toImperial();
    });
    calcBtn.addEventListener('click', calc);
    resetBtn.addEventListener('click', reset);

    // initial state
    reset();
  </script>
</body>
</html>


